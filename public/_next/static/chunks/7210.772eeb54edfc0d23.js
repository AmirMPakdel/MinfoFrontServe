(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7210],{22020:function(e,t,n){"use strict";n.d(t,{ZP:function(){return p},u6:function(){return y}});var o=n(85893),r=n(11837),a=n(90380),l=n(82854);function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"getUser",value:function(e,t){if(env.MOCKING_SERVER)setTimeout((function(){t(null,{result_code:env.SC.SUCCESS})}),2e3,t);else{var n=l.Z.retrive("user");(0,r.ej)(env.STUDENT_TOKEN_KEY)&&n&&!n.should_update?t(null,{result_code:env.SC.SUCCESS,data:n}):a.Z.Post(a.Z.urls.DASH_USER_INFO,{},{},(function(e,o){e?a.Z.ErrorHandler.type1(e):(o.result_code===env.SC.SUCCESS&&((n=o.data).userAccessLevel={1:!0,2:!0,3:!0,4:!0},n.should_update=!1,l.Z.store("user",n)),t(null,o))}))}}},{key:"getStudent",value:function(e,t){if(env.MOCKING_SERVER)setTimeout((function(){t(null,{result_code:env.SC.SUCCESS})}),2e3,t);else{var n=l.Z.retrive("student");(0,r.ej)(env.STUDENT_TOKEN_KEY)&&n&&!n.should_update?t(null,{result_code:env.SC.SUCCESS,data:n}):a.Z.Post(a.Z.urls.STD_PROFILE,{},{},(function(e,o){e?a.Z.ErrorHandler.type1(e):(o.result_code===env.SC.SUCCESS&&((n=o.data).should_update=!1,l.Z.store("student",n)),t(null,o))}))}}}])&&s(t.prototype,n),o&&s(t,o),e}(),u=n(26134),c=n(91281),d=n(73985);n(97151);function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=t,this.model=new i}var t,n,a;return t=e,(n=[{key:"loadUser",value:function(){var e=this,t=this.view.props.showWithoutAuth;(0,r.ej)(env.TOKEN_KEY)||t?this.model.getUser(null,(function(n,o){if(o.result_code===env.SC.SUCCESS){var r=o.data;u.Z.user=r,c.Z.execute("onUserChange",r),c.Z.execute("onAuthenticate",r),e.view.setState({loading:!1,authenticated:!0})}else t?e.view.setState({loading:!1,authenticated:!1}):window.location.href=env.PATHS.USER_AUTHENTICATION+"?redirected=1"})):window.location.href=env.PATHS.USER_AUTHENTICATION+"?redirected=1"}},{key:"loadStudent",value:function(){var e=this,t=this.view.props.showWithoutAuth;if(!(0,r.ej)(env.STUDENT_TOKEN_KEY)&&!t){var n=this;return c.Z.add("onStudentChange",(function(e){n.view.setState({loading:!1,authenticated:!0})})),void setTimeout((function(){console.log(u.Z.ModalLayout.setAndShowModal),u.Z.ModalLayout.setAndShowModal(1,(0,o.jsx)(d.Z,{closable:!1}))}),600)}this.model.getStudent(null,(function(n,r){if(r.result_code===env.SC.SUCCESS){var a=r.data;u.Z.student=a,c.Z.execute("onStudentChange",a),c.Z.execute("onAuthenticate",a),e.view.setState({loading:!1,authenticated:!0})}else t?e.view.setState({loading:!1,authenticated:!1}):u.Z.ModalLayout.setModal(1,(0,o.jsx)(d.Z,{}),(function(){u.Z.ModalLayout.visibleToggle(1,!0)}))}))}}])&&f(t.prototype,n),a&&f(t,a),e}();function y(e){(new i).getStudent(null,e)}},97151:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var o=n(85893),r=n(67294),a=n(22020),l=n(51725),s=n(62923),i=n.n(s);function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?u(e):t}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f(this,n)}}var v=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(d,e);var t,n,r,s=h(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=s.call(this,e)).controller=new a.ZP(u(t)),t.state={loading:!0,authenticated:!1},t}return t=d,(n=[{key:"componentDidMount",value:function(){"student"===this.props.accessType?this.controller.loadStudent():"userL1"===this.props.accessType||"userL2"===this.props.accessType?this.controller.loadUser():"noAuth"===this.props.accessType&&this.setState({loading:!1})}},{key:"render",value:function(){return(0,o.jsx)("div",{className:i().layout+" bglc2i ",children:this.state.loading?(0,o.jsx)(l.Z,{style:{minHeight:"90vh"}}):(0,o.jsx)(o.Fragment,{children:this.state.authenticated||this.props.showWithoutAuth||"noAuth"===this.props.accessType?this.props.children:null})})}}])&&c(t.prototype,n),r&&c(t,r),d}(r.Component)},81646:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var o=n(85893),r=n(67294),a=n(89655),l=n.n(a),s=n(26134),i=n(14538);function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?u(e):t}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=p(e);if(t){var r=p(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return y(this,n)}}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(p,e);var t,n,r,a=_(p);function p(){var e;return c(this,p),f(u(e=a.apply(this,arguments)),"state",{layer1:null,layer1_visible:!1,layer1_destroy:!1,layer2:null,layer2_visible:!1,layer2_destroy:!1,layer3:null,layer3_visible:!1,layer3_destroy:!1}),f(u(e),"setModal",(function(t,n,o){e.closeAndDelete(t,(function(){e.state["layer"+t+"_destroy"]=!1,e.state["layer"+t]=n,e.setState(e.state,o)}))})),f(u(e),"setAndShowModal",(function(t,n,o){e.closeAndDelete(t,(function(){e.state["layer"+t+"_destroy"]=!1,e.state["layer"+t+"_visible"]=!0,e.state["layer"+t]=n,e.setState(e.state,o)}))})),f(u(e),"visibleToggle",(function(t,n,o){e.state["layer"+t+"_visible"]=n,e.setState(e.state,o)})),f(u(e),"closeAndDelete",(function(t,n){e.state["layer"+t]?(e.state["layer"+t]=null,e.state["layer"+t+"_destroy"]=!0,e.state["layer"+t+"_visible"]=!1,e.setState(e.state,n)):(e.state["layer"+t+"_destroy"]=!0,e.state["layer"+t+"_visible"]=!1,e.setState(e.state,n))})),e}return t=p,(n=[{key:"componentDidMount",value:function(){s.Z.ModalLayout.setModal=this.setModal,s.Z.ModalLayout.setAndShowModal=this.setAndShowModal,s.Z.ModalLayout.visibleToggle=this.visibleToggle,s.Z.ModalLayout.closeAndDelete=this.closeAndDelete}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state;return(0,o.jsxs)("div",{className:l().modalay_con,children:[this.props.children,(0,o.jsx)(i.Z,{visible:e.layer1_visible,centered:!0,footer:null,wrapClassName:l().modal_wrapper,closable:!1,destroyOnClose:this.state.layer1_destroy,className:l().modal_con,children:(0,o.jsx)("div",{className:l().modal_wrapper2,children:(0,o.jsx)("div",{className:l().modal_wrapper3,children:e.layer1})})}),(0,o.jsx)(i.Z,{visible:e.layer2_visible,centered:!0,footer:null,wrapClassName:l().modal_wrapper,closable:!1,destroyOnClose:this.state.layer2_destroy,className:l().modal_con,children:(0,o.jsx)("div",{className:l().modal_wrapper2,children:(0,o.jsx)("div",{className:l().modal_wrapper3,children:e.layer2})})}),(0,o.jsx)(i.Z,{visible:e.layer3_visible,centered:!0,footer:null,wrapClassName:l().modal_wrapper,closable:!1,destroyOnClose:this.state.layer3_destroy,className:l().modal_con,children:(0,o.jsx)("div",{className:l().modal_wrapper2,children:(0,o.jsx)("div",{className:l().modal_wrapper3,children:e.layer3})})})]})}}])&&d(t.prototype,n),r&&d(t,r),p}(r.Component)},62923:function(e){e.exports={layout:"AccessLayout_layout__xfLs1"}},89655:function(e){e.exports={modalay_con:"ModalLayout_modalay_con__CjCPe",backdrop:"ModalLayout_backdrop__lSqxJ",modal_con:"ModalLayout_modal_con__AXF43",modal_wrapper:"ModalLayout_modal_wrapper__5Xq2A",modal_wrapper2:"ModalLayout_modal_wrapper2___hs5I",modal_wrapper3:"ModalLayout_modal_wrapper3__4TZfq"}}}]);