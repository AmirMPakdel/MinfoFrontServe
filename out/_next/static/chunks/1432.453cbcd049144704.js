(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1432],{59339:function(e,t,n){"use strict";n.d(t,{ZP:function(){return d},u6:function(){return f}});var o=n(85893),r=n(19973),a=n(11068),l=n(76676),s=n(44108),i=n(92127),u=n(94804);n(77098);function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=t,this.model=new r.Z}var t,n,d;return t=e,(n=[{key:"loadUser",value:function(){var e=this,t=this.view.props.showWithoutAuth;(0,l.ej)(env.TOKEN_KEY)||t?this.model.getUser(null,(function(n,o){if(o.result_code===env.SC.SUCCESS){var r=o.data;a.Z.user=r,i.Z.execute("onUserChange",r),i.Z.execute("onAuthenticate",r),e.view.setState({loading:!1,authenticated:!0})}else t?((0,l.kT)(env.TOKEN_KEY),e.view.setState({loading:!1,authenticated:!1})):((0,l.kT)(env.TOKEN_KEY),window.location.href=(0,s.xC)(env.PATHS.USER_AUTHENTICATION+"?redirected=1"))})):window.location.href=(0,s.xC)(env.PATHS.USER_AUTHENTICATION+"?redirected=1")}},{key:"loadStudent",value:function(){var e=this,t=this.view.props.showWithoutAuth;if(!(0,l.ej)(env.STUDENT_TOKEN_KEY)&&!t){var n=this;return i.Z.add("onStudentChange",(function(e){n.view.setState({loading:!1,authenticated:!0})})),void setTimeout((function(){console.log(a.Z.ModalLayout.setAndShowModal),a.Z.ModalLayout.setAndShowModal(1,(0,o.jsx)(u.Z,{closable:!1}))}),600)}this.model.getStudent(null,(function(n,r){if(r.result_code===env.SC.SUCCESS){var s=r.data;a.Z.student=s,i.Z.execute("onStudentChange",s),i.Z.execute("onAuthenticate",s),e.view.setState({loading:!1,authenticated:!0})}else t?((0,l.kT)(env.STUDENT_TOKEN_KEY),e.view.setState({loading:!1,authenticated:!1})):((0,l.kT)(env.STUDENT_TOKEN_KEY),a.Z.ModalLayout.setModal(1,(0,o.jsx)(u.Z,{}),(function(){a.Z.ModalLayout.visibleToggle(1,!0)})))}))}}])&&c(t.prototype,n),d&&c(t,d),e}();function f(e){(new r.Z).getStudent(null,e)}},19973:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var o=n(76676),r=n(47848),a=n(71733);function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,(n=[{key:"getUser",value:function(e,t){if(env.MOCKING_SERVER)setTimeout((function(){t(null,{result_code:env.SC.SUCCESS})}),2e3,t);else{var n=a.Z.retrive("user");(0,o.ej)(env.STUDENT_TOKEN_KEY)&&n&&!n.should_update?t(null,{result_code:env.SC.SUCCESS,data:n}):r.Z.Post(r.Z.urls.DASH_USER_INFO,{},{},(function(e,o){e?r.Z.ErrorHandler.type1(e):(o.result_code===env.SC.SUCCESS&&((n=o.data).userAccessLevel={1:!0,2:!0,3:!0,4:!0},n.should_update=!1,a.Z.store("user",n)),t(null,o))}))}}},{key:"getStudent",value:function(e,t){if(env.MOCKING_SERVER)setTimeout((function(){t(null,{result_code:env.SC.SUCCESS})}),2e3,t);else{var n=a.Z.retrive("student");(0,o.ej)(env.STUDENT_TOKEN_KEY)&&n&&!n.should_update?t(null,{result_code:env.SC.SUCCESS,data:n}):r.Z.Post(r.Z.urls.STD_PROFILE,{},{},(function(e,o){e?r.Z.ErrorHandler.type1(e):(o.result_code===env.SC.SUCCESS&&((n=o.data).should_update=!1,a.Z.store("student",n)),t(null,o))}))}}}])&&l(t.prototype,n),s&&l(t,s),e}()},77098:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var o=n(85893),r=n(67294),a=n(59339),l=n(90341),s=n(59578),i=n.n(s);function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?u(e):t}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f(this,n)}}var _=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(d,e);var t,n,r,s=h(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=s.call(this,e)).controller=new a.ZP(u(t)),t.state={loading:!0,authenticated:!1},t}return t=d,(n=[{key:"componentDidMount",value:function(){"student"===this.props.accessType?this.controller.loadStudent():"userL1"===this.props.accessType||"userL2"===this.props.accessType?this.controller.loadUser():"noAuth"===this.props.accessType&&this.setState({loading:!1})}},{key:"render",value:function(){return(0,o.jsx)("div",{className:i().layout+" bglc2i ",children:this.state.loading?(0,o.jsx)(l.Z,{style:{minHeight:"90vh"}}):(0,o.jsx)(o.Fragment,{children:this.state.authenticated||this.props.showWithoutAuth||"noAuth"===this.props.accessType?this.props.children:null})})}}])&&c(t.prototype,n),r&&c(t,r),d}(r.Component)},61160:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var o=n(85893),r=n(67294),a=n(7869),l=n.n(a),s=n(11068),i=n(84868);function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return!t||"object"!==_(t)&&"function"!==typeof t?u(e):t}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=p(e);if(t){var r=p(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return y(this,n)}}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(p,e);var t,n,r,a=v(p);function p(){var e;return c(this,p),f(u(e=a.apply(this,arguments)),"state",{layer1:null,layer1_visible:!1,layer1_destroy:!1,layer2:null,layer2_visible:!1,layer2_destroy:!1,layer3:null,layer3_visible:!1,layer3_destroy:!1}),f(u(e),"setModal",(function(t,n,o){e.closeAndDelete(t,(function(){e.state["layer"+t+"_destroy"]=!1,e.state["layer"+t]=n,e.setState(e.state,o)}))})),f(u(e),"setAndShowModal",(function(t,n,o){e.closeAndDelete(t,(function(){e.state["layer"+t+"_destroy"]=!1,e.state["layer"+t+"_visible"]=!0,e.state["layer"+t]=n,e.setState(e.state,o)}))})),f(u(e),"visibleToggle",(function(t,n,o){e.state["layer"+t+"_visible"]=n,e.setState(e.state,o)})),f(u(e),"closeAndDelete",(function(t,n){e.state["layer"+t]?(e.state["layer"+t]=null,e.state["layer"+t+"_destroy"]=!0,e.state["layer"+t+"_visible"]=!1,e.setState(e.state,n)):(e.state["layer"+t+"_destroy"]=!0,e.state["layer"+t+"_visible"]=!1,e.setState(e.state,n))})),e}return t=p,(n=[{key:"componentDidMount",value:function(){s.Z.ModalLayout.setModal=this.setModal,s.Z.ModalLayout.setAndShowModal=this.setAndShowModal,s.Z.ModalLayout.visibleToggle=this.visibleToggle,s.Z.ModalLayout.closeAndDelete=this.closeAndDelete}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state;return(0,o.jsxs)("div",{className:l().modalay_con,children:[this.props.children,(0,o.jsx)(i.Z,{visible:e.layer1_visible,centered:!0,footer:null,wrapClassName:l().modal_wrapper,closable:!1,destroyOnClose:this.state.layer1_destroy,className:l().modal_con,children:(0,o.jsx)("div",{className:l().modal_wrapper2,children:(0,o.jsx)("div",{className:l().modal_wrapper3,children:e.layer1})})}),(0,o.jsx)(i.Z,{visible:e.layer2_visible,centered:!0,footer:null,wrapClassName:l().modal_wrapper,closable:!1,destroyOnClose:this.state.layer2_destroy,className:l().modal_con,children:(0,o.jsx)("div",{className:l().modal_wrapper2,children:(0,o.jsx)("div",{className:l().modal_wrapper3,children:e.layer2})})}),(0,o.jsx)(i.Z,{visible:e.layer3_visible,centered:!0,footer:null,wrapClassName:l().modal_wrapper,closable:!1,destroyOnClose:this.state.layer3_destroy,className:l().modal_con,children:(0,o.jsx)("div",{className:l().modal_wrapper2,children:(0,o.jsx)("div",{className:l().modal_wrapper3,children:e.layer3})})})]})}}])&&d(t.prototype,n),r&&d(t,r),p}(r.Component)},59578:function(e){e.exports={layout:"AccessLayout_layout__xfLs1"}},7869:function(e){e.exports={modalay_con:"ModalLayout_modalay_con__CjCPe",backdrop:"ModalLayout_backdrop__lSqxJ",modal_con:"ModalLayout_modal_con__AXF43",modal_wrapper:"ModalLayout_modal_wrapper__5Xq2A",modal_wrapper2:"ModalLayout_modal_wrapper2___hs5I",modal_wrapper3:"ModalLayout_modal_wrapper3__4TZfq"}}}]);